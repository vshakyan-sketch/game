<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>
    
</body>
</html>

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–ê—Ä–∫–∞–Ω–æ–∏–¥ (Breakout) ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: #1a1a2e;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            touch-action: none; /* –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ */
        }

        .game-container {
            background: #16213e;
            border-radius: 24px;
            padding: 20px;
            box-shadow: 0 20px 30px rgba(0,0,0,0.6);
            width: min(95vw, 95vh * 1.33); /* –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ –ø—Ä–∏–º–µ—Ä–Ω–æ 4:3 */
            aspect-ratio: 4 / 3;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
            background: #0f3460;
            border-radius: 16px;
            cursor: none; /* —Å–∫—Ä—ã–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã, –Ω–æ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –æ–Ω –∏ —Ç–∞–∫ –Ω–µ –≤–∏–¥–µ–Ω */
            touch-action: none;
        }

        .info-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-top: 12px;
            color: #e94560;
            font-weight: bold;
            font-size: 1.2rem;
            padding: 0 8px;
        }

        #restartBtn {
            background: #e94560;
            border: none;
            color: white;
            font-weight: bold;
            font-size: 1rem;
            padding: 8px 24px;
            border-radius: 40px;
            cursor: pointer;
            box-shadow: 0 4px 0 #9c2b3f;
            transition: 0.1s ease;
            border: 1px solid #ff7b8f;
            touch-action: manipulation;
        }

        #restartBtn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        #message {
            color: #f5f5f5;
            background: #0f3460cc;
            padding: 6px 18px;
            border-radius: 40px;
            font-size: 1rem;
            backdrop-filter: blur(4px);
        }
    </style>
</head>
<body>
<div class="game-container">
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <div class="info-panel">
        <span id="message">üî¥ –ò–≥—Ä–∞</span>
        <button id="restartBtn">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
    </div>
</div>

<script>
    (function() {
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const messageEl = document.getElementById('message');

        // --- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã ---
        const COLS = 8;          // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∏—Ä–ø–∏—á–µ–π –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏
        const ROWS = 5;           // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∏—Ä–ø–∏—á–µ–π –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏
        const BRICK_GAP = 6;      // –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –º–µ–∂–¥—É –∫–∏—Ä–ø–∏—á–∞–º–∏
        const BRICK_HEIGHT = 24;   // –≤—ã—Å–æ—Ç–∞ –∫–∏—Ä–ø–∏—á–∞
        const BRICK_WIDTH = (canvas.width - (COLS + 1) * BRICK_GAP) / COLS; // –∞–≤—Ç–æ-—Ä–∞—Å—á–µ—Ç —à–∏—Ä–∏–Ω—ã –ø–æ–¥ –∫–∞–Ω–≤–∞—Å

        // –ì—Ä–∞–Ω–∏—Ü—ã –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è (—Å—Ç–µ–Ω—ã)
        const WALL_LEFT = 0;
        const WALL_RIGHT = canvas.width;
        const WALL_TOP = 0;

        // –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞
        const PADDLE_WIDTH = 120;
        const PADDLE_HEIGHT = 16;
        const PADDLE_Y = canvas.height - PADDLE_HEIGHT - 20; // —á—É—Ç—å –≤—ã—à–µ –Ω–∏–∂–Ω–µ–≥–æ –∫—Ä–∞—è

        // –ú—è—á
        const BALL_RADIUS = 8;
        const BALL_SPEED = 4.5;

        // --- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è ---
        let bricks = [];
        let paddleX = (canvas.width - PADDLE_WIDTH) / 2;
        let ball = {
            x: canvas.width / 2,
            y: PADDLE_Y - BALL_RADIUS - 5,
            dx: BALL_SPEED,
            dy: -BALL_SPEED,
            active: true      // true = –º—è—á –¥–≤–∏–∂–µ—Ç—Å—è; false = –ø—Ä–∏–ª–∏–ø –∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —ç—Ç–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ, –Ω–æ –æ—Å—Ç–∞–≤–∏–º –Ω–∞ –±—É–¥—É—â–µ–µ)
        };
        let gameState = 'playing'; // 'playing', 'win', 'gameover'
        let animationFrame = null;
        let mouseX = 0; // –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º—ã—à–∏

        // --- –°–æ–∑–¥–∞–Ω–∏–µ –∫–∏—Ä–ø–∏—á–µ–π (—Å –ø—Ä–æ—á–Ω–æ—Å—Ç—å—é) ---
        function createBricks() {
            const bricksArray = [];
            for (let row = 0; row < ROWS; row++) {
                for (let col = 0; col < COLS; col++) {
                    // –ø—Ä–æ—á–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä—è–¥–∞: —á–µ–º –Ω–∏–∂–µ, —Ç–µ–º –ø—Ä–æ—á–Ω–µ–µ
                    let hp;
                    if (row === 0) hp = 1;          // –∫—Ä–∞—Å–Ω—ã–π (1 —É–¥–∞—Ä)
                    else if (row === 1) hp = 1;      // —Ç–æ–∂–µ –∫—Ä–∞—Å–Ω—ã–π
                    else if (row === 2) hp = 2;      // –æ—Ä–∞–Ω–∂–µ–≤—ã–π (2 —É–¥–∞—Ä–∞)
                    else if (row === 3) hp = 2;      // –æ—Ä–∞–Ω–∂–µ–≤—ã–π
                    else hp = 3;                      // –∂–µ–ª—Ç—ã–π (3 —É–¥–∞—Ä–∞)

                    bricksArray.push({
                        x: col * (BRICK_WIDTH + BRICK_GAP) + BRICK_GAP,
                        y: row * (BRICK_HEIGHT + BRICK_GAP) + BRICK_GAP + 40, // –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É 40px
                        width: BRICK_WIDTH,
                        height: BRICK_HEIGHT,
                        hp: hp,
                        maxHp: hp
                    });
                }
            }
            return bricksArray;
        }

        // --- –°–±—Ä–æ—Å –∏–≥—Ä—ã (–Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ) ---
        function resetGame() {
            bricks = createBricks();
            paddleX = (canvas.width - PADDLE_WIDTH) / 2;
            ball.x = canvas.width / 2;
            ball.y = PADDLE_Y - BALL_RADIUS - 5;
            ball.dx = BALL_SPEED;
            ball.dy = -BALL_SPEED;
            gameState = 'playing';
            messageEl.innerText = 'üî¥ –ò–≥—Ä–∞';
        }

        // --- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–ª–∏–∑–∏–∏ –º—è—á–∞ —Å –∫–∏—Ä–ø–∏—á–∞–º–∏ ---
        function handleBallBrickCollision() {
            for (let i = bricks.length - 1; i >= 0; i--) {
                const b = bricks[i];
                // –ø—Ä–æ—Å—Ç–µ–π—à–µ–µ AABB-—Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –∫—Ä—É–≥–∞ –∏ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞
                // –Ω–∞–π–¥—ë–º –±–ª–∏–∂–∞–π—à—É—é —Ç–æ—á–∫—É –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ –∫ —Ü–µ–Ω—Ç—Ä—É –∫—Ä—É–≥–∞
                const closestX = Math.max(b.x, Math.min(ball.x, b.x + b.width));
                const closestY = Math.max(b.y, Math.min(ball.y, b.y + b.height));
                const dx = ball.x - closestX;
                const dy = ball.y - closestY;
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance < BALL_RADIUS) { // –µ—Å—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç
                    // —É–º–µ–Ω—å—à–∞–µ–º –ø—Ä–æ—á–Ω–æ—Å—Ç—å –∫–∏—Ä–ø–∏—á–∞
                    b.hp -= 1;
                    if (b.hp <= 0) {
                        bricks.splice(i, 1); // —É–¥–∞–ª—è–µ–º –∫–∏—Ä–ø–∏—á
                    }

                    // --- –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–æ—Ä–æ–Ω—É —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è –¥–ª—è –æ—Ç—Å–∫–æ–∫–∞ ---
                    // –°–º–µ—â–∞–µ–º –º—è—á, —á—Ç–æ–±—ã –Ω–µ –∑–∞—Å—Ç—Ä—è–ª
                    if (distance > 0) {
                        const overlap = BALL_RADIUS - distance;
                        const nx = dx / distance;
                        const ny = dy / distance;
                        // –æ—Ç–æ–¥–≤–∏–≥–∞–µ–º –º—è—á –æ—Ç —Ç–æ—á–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞
                        ball.x += nx * overlap;
                        ball.y += ny * overlap;
                    }

                    // –ì—Ä—É–±–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º, –ø–æ –∫–∞–∫–æ–π –æ—Å–∏ –±—ã–ª–æ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ:
                    // –µ—Å–ª–∏ |dx| > |dy|, —Ç–æ —É–¥–∞—Ä –±–ª–∏–∂–µ –∫ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –≥—Ä–∞–Ω–∏ (–º–µ–Ω—è–µ–º dx)
                    // –∏–Ω–∞—á–µ –º–µ–Ω—è–µ–º dy.
                    // –ù–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–∞–∫–∂–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
                    if (Math.abs(dx) > Math.abs(dy)) {
                        ball.dx = -ball.dx;
                    } else {
                        ball.dy = -ball.dy;
                    }

                    // –ü–æ—Å–ª–µ –æ—Ç—Å–∫–æ–∫–∞ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∫–∏—Ä–ø–∏—á –∑–∞ –∫–∞–¥—Ä (—á—Ç–æ–±—ã –º—è—á –Ω–µ —É–±–∏–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ä–∞–∑—É)
                    break;
                }
            }
        }

        // --- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–ª–∏–∑–∏–∏ —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π ---
        function handlePaddleCollision() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –º—è—á –Ω–∏–∂–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (–ø–æ Y) ‚Äì –Ω—É–∂–Ω–æ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
            if (ball.y + BALL_RADIUS > PADDLE_Y &&
                ball.x > paddleX &&
                ball.x < paddleX + PADDLE_WIDTH &&
                ball.dy > 0) { // –¥–≤–∏–∂–µ—Ç—Å—è –≤–Ω–∏–∑

                // –û—Ç—Å–∫–æ–∫ –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —É–≥–ª–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–µ—Å—Ç–∞ —É–¥–∞—Ä–∞
                const hitPos = ball.x - paddleX; // –ø–æ–∑–∏—Ü–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ª–µ–≤–æ–≥–æ –∫—Ä–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (0..PADDLE_WIDTH)
                const relativeHit = (hitPos / PADDLE_WIDTH) - 0.5; // –æ—Ç -0.5 –¥–æ 0.5
                const maxAngle = 2.0; // –º–∞–∫—Å–∏–º—É–º –∏–∑–º–µ–Ω–µ–Ω–∏—è dx

                // –ù–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å: —Å–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±—â—É—é —Å–∫–æ—Ä–æ—Å—Ç—å, –Ω–æ –º–µ–Ω—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                const speed = Math.sqrt(ball.dx * ball.dx + ball.dy * ball.dy);
                let newDx = relativeHit * maxAngle * speed; // –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è
                // –û–≥—Ä–∞–Ω–∏—á–∏–º, —á—Ç–æ–±—ã —É–≥–æ–ª –Ω–µ —Å—Ç–∞–ª —Å–ª–∏—à–∫–æ–º –ø–æ–ª–æ–≥–∏–º
                if (Math.abs(newDx) < 0.8) newDx = (newDx > 0 ? 0.8 : -0.8);
                if (Math.abs(newDx) > speed * 0.9) newDx = (newDx > 0 ? speed * 0.9 : -speed * 0.9);

                ball.dx = newDx;
                ball.dy = -Math.sqrt(speed * speed - ball.dx * ball.dx); // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –º–æ–¥—É–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏, –Ω–æ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π Y

                // –ü–æ–¥–Ω–∏–º–∞–µ–º –º—è—á –Ω–∞–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∑–∞–ª–∏–ø–∞–Ω–∏—è
                ball.y = PADDLE_Y - BALL_RADIUS - 1;
            }
        }

        // --- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π —Å–æ —Å—Ç–µ–Ω–∞–º–∏ ---
        function handleWallCollision() {
            // –õ–µ–≤–∞—è –∏ –ø—Ä–∞–≤–∞—è —Å—Ç–µ–Ω–∞
            if (ball.x - BALL_RADIUS < WALL_LEFT) {
                ball.x = WALL_LEFT + BALL_RADIUS;
                ball.dx = -ball.dx;
            } else if (ball.x + BALL_RADIUS > WALL_RIGHT) {
                ball.x = WALL_RIGHT - BALL_RADIUS;
                ball.dx = -ball.dx;
            }
            // –í–µ—Ä—Ö–Ω—è—è —Å—Ç–µ–Ω–∞
            if (ball.y - BALL_RADIUS < WALL_TOP) {
                ball.y = WALL_TOP + BALL_RADIUS;
                ball.dy = -ball.dy;
            }
        }

        // --- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä—ã ---
        function update() {
            if (gameState !== 'playing') return;

            // –î–≤–∏–≥–∞–µ–º –º—è—á
            ball.x += ball.dx;
            ball.y += ball.dy;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–∏–≥—Ä—ã—à (–º—è—á —É–ø–∞–ª –Ω–∏–∂–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã)
            if (ball.y + BALL_RADIUS > canvas.height) {
                gameState = 'gameover';
                messageEl.innerText = 'üíî –ü–æ—Ä–∞–∂–µ–Ω–∏–µ';
                return;
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–±–µ–¥—É (–Ω–µ—Ç –∫–∏—Ä–ø–∏—á–µ–π)
            if (bricks.length === 0) {
                gameState = 'win';
                messageEl.innerText = 'üéâ –ü–æ–±–µ–¥–∞!';
                return;
            }

            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è –≤ –ø–æ—Ä—è–¥–∫–µ: —Å—Ç–µ–Ω—ã, –∫–∏—Ä–ø–∏—á–∏, –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
            handleWallCollision();
            handleBallBrickCollision();
            handlePaddleCollision();

            // –ù–µ–±–æ–ª—å—à–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ–±—ã –º—è—á –Ω–µ —É—Ö–æ–¥–∏–ª –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –ø–æ Y (–Ω–∞ —Å–ª—É—á–∞–π —Ä–µ–¥–∫–∏—Ö –±–∞–≥–æ–≤)
            if (ball.y - BALL_RADIUS < WALL_TOP) {
                ball.y = WALL_TOP + BALL_RADIUS;
                ball.dy = -ball.dy;
            }
        }

        // --- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ ---
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // –†–∏—Å—É–µ–º –∫–∏—Ä–ø–∏—á–∏
            bricks.forEach(brick => {
                // –¶–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ (maxHp)
                if (brick.maxHp === 1) ctx.fillStyle = '#e63946'; // –∫—Ä–∞—Å–Ω—ã–π
                else if (brick.maxHp === 2) ctx.fillStyle = '#f39c12'; // –æ—Ä–∞–Ω–∂–µ–≤—ã–π
                else ctx.fillStyle = '#f1c40f'; // –∂–µ–ª—Ç—ã–π

                ctx.fillRect(brick.x, brick.y, brick.width, brick.height);
                // –†–∞–º–∫–∞
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 1;
                ctx.strokeRect(brick.x, brick.y, brick.width, brick.height);

                // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–≤—à–µ–π—Å—è –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ (—Ç–µ–∫—Å—Ç)
                if (brick.hp > 1) {
                    ctx.fillStyle = '#000';
                    ctx.font = 'bold 12px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(brick.hp, brick.x + brick.width/2, brick.y + brick.height/2);
                }
            });

            // –†–∏—Å—É–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
            ctx.fillStyle = '#4cc9f0';
            ctx.shadowColor = '#80d4ff';
            ctx.shadowBlur = 10;
            ctx.fillRect(paddleX, PADDLE_Y, PADDLE_WIDTH, PADDLE_HEIGHT);
            ctx.shadowBlur = 0;
            ctx.shadowColor = 'transparent';
            ctx.strokeStyle = '#f8f9fa';
            ctx.lineWidth = 2;
            ctx.strokeRect(paddleX, PADDLE_Y, PADDLE_WIDTH, PADDLE_HEIGHT);

            // –†–∏—Å—É–µ–º –º—è—á
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, BALL_RADIUS, 0, Math.PI * 2);
            ctx.fillStyle = '#f8f9fa';
            ctx.shadowBlur = 15;
            ctx.shadowColor = '#f8f9fa';
            ctx.fill();
            ctx.shadowBlur = 0;
            ctx.strokeStyle = '#b0c4de';
            ctx.lineWidth = 1;
            ctx.stroke();
        }

        // --- –¶–∏–∫–ª –∞–Ω–∏–º–∞—Ü–∏–∏ ---
        function gameLoop() {
            update();
            draw();
            animationFrame = requestAnimationFrame(gameLoop);
        }

        // --- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º—ã—à—å—é ---
        function handleMouseMove(e) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;   // —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø–∏–∫—Å–µ–ª–µ–π canvas –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –Ω–∞ —ç–∫—Ä–∞–Ω–µ
            let mouseCanvasX = (e.clientX - rect.left) * scaleX;
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
            mouseCanvasX = Math.max(0, Math.min(mouseCanvasX - PADDLE_WIDTH / 2, canvas.width - PADDLE_WIDTH));
            paddleX = mouseCanvasX;
        }

        function handleMouseLeave() {
            // –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º, –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ
        }

        // --- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å–∞–Ω–∏–µ–º (–¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞) ---
        function handleTouchMove(e) {
            e.preventDefault(); // –∑–∞–ø—Ä–µ—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches[0];
            const scaleX = canvas.width / rect.width;
            let touchCanvasX = (touch.clientX - rect.left) * scaleX;
            touchCanvasX = Math.max(0, Math.min(touchCanvasX - PADDLE_WIDTH / 2, canvas.width - PADDLE_WIDTH));
            paddleX = touchCanvasX;
        }

        function handleTouchStart(e) {
            e.preventDefault(); // —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –∏–ª–∏ –∑—É–º–∞
            // –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –ø–æ–¥ –ø–∞–ª–µ—Ü
            handleTouchMove(e);
        }

        // --- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π (—Å—Ç—Ä–µ–ª–∫–∏) ---
        const KEY_LEFT = 37;
        const KEY_RIGHT = 39;
        let leftPressed = false;
        let rightPressed = false;

        function handleKeyDown(e) {
            if (e.keyCode === KEY_LEFT) {
                leftPressed = true;
                e.preventDefault();
            } else if (e.keyCode === KEY_RIGHT) {
                rightPressed = true;
                e.preventDefault();
            }
        }

        function handleKeyUp(e) {
            if (e.keyCode === KEY_LEFT) {
                leftPressed = false;
                e.preventDefault();
            } else if (e.keyCode === KEY_RIGHT) {
                rightPressed = false;
                e.preventDefault();
            }
        }

        // –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏—à–∞–º–∏ (–±—É–¥–µ–º –æ–±–Ω–æ–≤–ª—è—Ç—å –≤ –∫–∞–∂–¥–æ–º –∫–∞–¥—Ä–µ)
        function updatePaddleFromKeys() {
            if (!gameState) return;
            const step = 8;
            if (leftPressed) {
                paddleX = Math.max(0, paddleX - step);
            }
            if (rightPressed) {
                paddleX = Math.min(canvas.width - PADDLE_WIDTH, paddleX + step);
            }
        }

        // –ù–µ–º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–∏–º gameLoop, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à
        const originalUpdate = update;
        update = function() {
            updatePaddleFromKeys();
            originalUpdate();
        };

        // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π ---
        function initEvents() {
            // –ú—ã—à—å
            canvas.addEventListener('mousemove', handleMouseMove);
            canvas.addEventListener('mouseleave', handleMouseLeave);
            // –ö–∞—Å–∞–Ω–∏—è
            canvas.addEventListener('touchstart', handleTouchStart, { passive: false });
            canvas.addEventListener('touchmove', handleTouchMove, { passive: false });
            canvas.addEventListener('touchend', (e) => e.preventDefault());
            canvas.addEventListener('touchcancel', (e) => e.preventDefault());

            // –ö–ª–∞–≤–∏—à–∏
            window.addEventListener('keydown', handleKeyDown);
            window.addEventListener('keyup', handleKeyUp);

            // –ö–Ω–æ–ø–∫–∞ —Ä–µ—Å—Ç–∞—Ä—Ç–∞
            document.getElementById('restartBtn').addEventListener('click', () => {
                resetGame();
            });
            // –¢–∞–∫–∂–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ —É–¥–æ–±–Ω–æ —Ç–∞–ø–Ω—É—Ç—å –ø–æ canvas –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞? –ù–æ –æ—Å—Ç–∞–≤–∏–º –∫–Ω–æ–ø–∫—É.
        }

        // --- –ê–¥–∞–ø—Ç–∞—Ü–∏—è canvas –ø–æ–¥ —Ä–∞–∑–º–µ—Ä—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö (—Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏, –Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º—ã—à–∏) ---
        // –í–∞–∂–Ω–æ! –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º—ã—à–∏/–∫–∞—Å–∞–Ω–∏–π –º—ã —É–∂–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —á–µ—Ä–µ–∑ rect –∏ scaleX.
        // –í—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

        // --- –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã ---
        resetGame();
        initEvents();
        gameLoop();

        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–∫—Ä–æ–ª–ª —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç—Ä–µ–ª–∫–∞–º–∏ (—á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª–∏ –∏–≥—Ä–µ)
        window.addEventListener('keydown', (e) => {
            if (e.keyCode === 37 || e.keyCode === 39 || e.keyCode === 32) {
                e.preventDefault();
            }
        }, false);

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ –Ω—É–∂–Ω–∞
        // –ù–æ –ø—Ä–∏ —Å–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

        // –£–±–∏—Ä–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –Ω–∞ canvas (–ø—Ä–∞–≤—ã–π –∫–ª–∏–∫)
        canvas.addEventListener('contextmenu', (e) => e.preventDefault());
    })();
</script>
</body>
</html>
```
